import pefile


#实例化pefile.PE,通过调用PE构造函数，加载并解析指定的PE文件
pe = pefile.PE("ircbot.exe")


#遍历PE文件的各个节点并打印有关它们的信息
for section in pe.sections:
	print (section.Name, hex(section.VirtualAddress), 
	hex(section.Misc_VirtualSize), section.SizeOfRawData)

'''
输出

b'.text\x00\x00\x00' 0x1000(加载节的虚拟内存地址基址，也可以视为节的内存地址基址) 0x32830(指定了节被加载后所需的内存大小) 207360(该节将在该内存块中所占用的数据量)
b'.rdata\x00\x00' 0x34000 0x427a 17408
b'.data\x00\x00\x00' 0x39000 0x5cff8 10752
b'.idata\x00\x00' 0x96000 0xbb0 3072
b'.reloc\x00\x00' 0x97000 0x211d 8704
'''



#使用pefile列出二进制文件将加载的DLL文件， 以及它将在这些DLL文件中所请求的函数调用。

#从ircbot.exe中提取导入信息
for entry in pe.DIRECTORY_ENTRY_IMPORT:
	print (entry.dll)
	for function in entry.imports:
		print ('\t', function.name)

#输出 列出了恶意软件声明和将引用的丰富的函数数组
'''
b'KERNEL32.DLL'
	 b'GetLocalTime'
	 b'ExitThread'
	 b'CloseHandle'
	 b'WriteFile' 
	 b'CreateFileA'
	 b'ExitProcess'
	 b'CreateProcessA'
	 b'GetTickCount'
	 b'GetModuleFileNameA'
	 b'GetSystemDirectoryA'
	 b'Sleep'
	 b'GetTimeFormatA'
	 b'GetDateFormatA'
	 b'GetLastError'
	 b'CreateThread'
	 b'GetFileSize'
	 b'GetFileAttributesA'
	 b'FindClose'
	 b'FileTimeToSystemTime'
	 b'FileTimeToLocalFileTime'
	 b'FindNextFileA'
	 b'FindFirstFileA'
	 b'ReadFile'
	 b'SetFilePointer'
	 b'WriteConsoleA'
	 b'GetStdHandle'
	 b'LoadLibraryA'
	 b'GetProcAddress'
	 b'GetModuleHandleA'
	 b'FormatMessageA'
	 b'GlobalUnlock'
	 b'GlobalLock'
	 b'UnmapViewOfFile'
	 b'MapViewOfFile'
	 b'CreateFileMappingA'
	 b'SetFileTime'
	 b'GetFileTime'
	 b'ExpandEnvironmentStringsA'
	 b'SetFileAttributesA'
	 b'GetTempPathA'
	 b'GetCurrentProcess'
	 b'TerminateProcess'
	 b'OpenProcess'
	 b'GetComputerNameA'
	 b'GetLocaleInfoA'
	 b'GetVersionExA'
	 b'TerminateThread'
	 b'FlushFileBuffers'
	 b'SetStdHandle'
	 b'IsBadWritePtr'
	 b'IsBadReadPtr'
	 b'HeapValidate'
	 b'GetStartupInfoA'
	 b'GetCommandLineA'
	 b'GetVersion'
	 b'DebugBreak'
	 b'InterlockedDecrement'
	 b'OutputDebugStringA'
	 b'InterlockedIncrement'
	 b'HeapAlloc'
	 b'HeapReAlloc'
	 b'HeapFree'
	 b'HeapDestroy'
	 b'HeapCreate'
	 b'VirtualFree'
	 b'VirtualAlloc'
	 b'WideCharToMultiByte'
	 b'MultiByteToWideChar'
	 b'LCMapStringA'
	 b'LCMapStringW'
	 b'GetCPInfo'
	 b'GetACP'
	 b'GetOEMCP'
	 b'UnhandledExceptionFilter'
	 b'FreeEnvironmentStringsA'
	 b'FreeEnvironmentStringsW'
	 b'GetEnvironmentStrings'
	 b'GetEnvironmentStringsW'
	 b'SetHandleCount'
	 b'GetFileType'
	 b'RtlUnwind'
	 b'SetConsoleCtrlHandler'
	 b'GetStringTypeA'
	 b'GetStringTypeW'
	 b'SetEndOfFile'
b'USER32.dll'
	 b'MessageBoxA'
'''


# 3、使用pefile解析PE文件格式


## 2.读入数据

<font color=#999AAA >代码如下（示例）：



```c
data = pd.read_csv(
    'https://labfile.oss.aliyuncs.com/courses/1283/adult.data.csv')
print(data.head())
